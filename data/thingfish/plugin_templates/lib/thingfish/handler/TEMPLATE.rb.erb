#!/usr/bin/env ruby

require 'thingfish'
require 'thingfish/mixins'
require 'thingfish/handler'

#
# A <%= @name %> handler for ThingFish
#
# == Synopsis
#
#   # thingfish.conf
#   urimap:
#     /<%= @name %>:
#       - <%= @name %>:
#           resource_dir: data/thingfish/web-interface
# 
# == Version
#
#  $Id$
#
# == Authors
#
# * <%= @author %>
#
# :include: LICENSE
#
#---
#
# Please see the file LICENSE in the 'docs' directory for licensing details.
#
class ThingFish::<%= @name.capitalize %>Handler < ThingFish::Handler
	include ThingFish::Loggable,
	        ThingFish::Constants,
	        ThingFish::ResourceLoader

	# Plugin version constant
	VERSION = '0.0.1'


	# 
	# Handler interface
	# 

	### Handler API: handle a GET request with an inspection page.
	def handle_get_request( request, response )
		# :TODO: Handle GET requests
	end


	# 
	# (Optional) HTML interface support
	# 

	### Make an HTML fragment for the body text/html response (HTML filter API).
	def make_html_content( body, request, response )
		template = self.get_erb_resource( 'template.rhtml' )
		response.headers[ :content_type ] = 'text/html'
		return template.result( binding() )
	end


	### Return the HTML fragment that should be used to link to this handler.
	def make_index_content( uri )
		tmpl = self.get_erb_resource( "index_content.rhtml" )
		return tmpl.result( binding() )
	end

end # class ThingFish::<%= @name.capitalize %>Handler

# vim: set nosta noet ts=4 sw=4:
